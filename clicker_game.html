<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR CITY GAME - –¢–∞–ø–∞–ª–∫–∞ üéÆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .rules {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: left;
            font-size: 13px;
            line-height: 1.6;
        }

        .rules h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
        }

        .game-area {
            margin-bottom: 30px;
        }

        .clicker-button {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            font-size: 60px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
            transition: all 0.1s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .clicker-button:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .clicker-button:hover:not(:active) {
            transform: scale(1.05);
        }

        .score-popup {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 24px;
            pointer-events: none;
            animation: float-up 1s ease-out forwards;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }

        .combo {
            font-size: 16px;
            color: #f5576c;
            margin-bottom: 15px;
            font-weight: bold;
            min-height: 24px;
        }

        .reward-box {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .reward-box.show {
            display: block;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .reward-box h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .promo-code {
            background: rgba(255, 255, 255, 0.3);
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            word-break: break-all;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            grid-column: span 2;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
        }

        .leaderboard {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
        }

        .leaderboard h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 13px;
        }

        .leaderboard-item:nth-child(1) {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            font-weight: bold;
        }

        .leaderboard-item:nth-child(2) {
            background: #e8e8e8;
        }

        .leaderboard-item:nth-child(3) {
            background: #f5f5f5;
        }

        .medal {
            font-size: 18px;
            margin-right: 8px;
        }

        .username-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        .username-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .seasonal-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 15px;
            color: #856404;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .clicker-button {
                width: 120px;
                height: 120px;
                font-size: 48px;
            }

            .stat-value {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ VR CITY GAME</h1>
            <p>–¢–∞–ø–∞–ª–∫–∞ –Ω–∞ —Ä–µ–∫–æ—Ä–¥!</p>
        </div>

        <div class="rules">
            <h3>üìã –ü—Ä–∞–≤–∏–ª–∞:</h3>
            <p>üéØ –ò–≥—Ä–∞–π, –Ω–∞–±–∏—Ä–∞–π –æ—á–∫–∏ –∏ –ø–æ–ø–∞–¥–∏ –≤ —Ç–æ–ø!</p>
            <p>üèÜ –õ—É—á—à–∏–π –∏–≥—Ä–æ–∫ –Ω–µ–¥–µ–ª–∏ –ø–æ–ª—É—á–∏—Ç <strong>1 –¥–µ–Ω—å PS5 –ë–ï–°–ü–õ–ê–¢–ù–û</strong></p>
            <p>üéÅ <strong>10% —à–∞–Ω—Å</strong> –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –∏–ª–∏ —Å–∫–∏–¥–∫—É –≤ –Ω–∞–±–æ—Ä–µ!</p>
            <p>‚ö° –ß–µ–º –±–æ–ª—å—à–µ —Ç–∞–ø–æ–≤ - —Ç–µ–º –±–æ–ª—å—à–µ –æ—á–∫–æ–≤!</p>
        </div>

        <div class="seasonal-info">
            ‚è∞ –°–µ–∑–æ–Ω: <strong>–ù–µ–¥–µ–ª—è</strong> | –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        </div>

        <input type="text" class="username-input" id="usernameInput" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è –∏–ª–∏ –Ω–∏–∫ üë§" maxlength="20">

        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">–¢–≤–æ–π —Å—á—ë—Ç</div>
                <div class="stat-value" id="scoreValue">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">–ö–æ–º–±–æ üî•</div>
                <div class="stat-value" id="comboValue">1x</div>
            </div>
        </div>

        <div class="game-area">
            <div class="combo" id="comboText"></div>
            <button class="clicker-button" id="clickerBtn">üëÜ</button>
        </div>

        <div class="reward-box" id="rewardBox">
            <h3>üéâ –ü–û–ë–ï–î–ê! üéâ</h3>
            <p>–¢—ã –≤—ã–∏–≥—Ä–∞–ª –ø—Ä–æ–º–æ–∫–æ–¥/—Å–∫–∏–¥–∫—É!</p>
            <div class="promo-code" id="promoCode"></div>
        </div>

        <div class="buttons">
            <button class="btn btn-secondary" id="resetBtn">üîÑ –ó–∞–Ω–æ–≤–æ</button>
            <button class="btn btn-secondary" id="shareBtn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            <button class="btn btn-primary" id="submitBtn">üìä –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
        </div>

        <div class="leaderboard" id="leaderboard">
            <h3>üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</h3>
            <div id="leaderboardList"></div>
        </div>
    </div>

    <script>
        // ===== –ü–†–û–ú–û–ö–û–î–´ =====
        const promoCodes = [
            { code: "GIFT-PS5-100", discount: "–°–∫–∏–¥–∫–∞ 100‚ÇΩ –Ω–∞ –ª—é–±—É—é –∞—Ä–µ–Ω–¥—É!" },
            { code: "FREE-DAY-PS5", discount: "1 –¥–µ–Ω—å PS5 –ë–ï–°–ü–õ–ê–¢–ù–û!" },
            { code: "PROMO-VR500", discount: "–°–∫–∏–¥–∫–∞ 500‚ÇΩ –Ω–∞ –Ω–µ–¥–µ–ª—é!" },
            { code: "MEGA-DEAL", discount: "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É!" },
            { code: "LUCKY-PLAY", discount: "–ë–æ–Ω—É—Å —á–∞—Å –≤ –ø–æ–¥–∞—Ä–æ–∫!" },
            { code: "VRCITY-200", discount: "200‚ÇΩ –Ω–∞ —Å—á—ë—Ç!" },
            { code: "WIN-BIG", discount: "–°–∫–∏–¥–∫–∞ 300‚ÇΩ!" },
            { code: "JACKPOT-PS", discount: "2 –¥–Ω—è —Å–æ —Å–∫–∏–¥–∫–æ–π 40%!" },
            { code: "GAMER-VIP", discount: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —á–∞—Å –∏–≥—Ä—ã!" },
            { code: "ULTRA-PRIZE", discount: "1500‚ÇΩ —ç–∫–æ–Ω–æ–º–∏–∏!" }
        ];

        // ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        let score = 0;
        let combo = 1;
        let username = localStorage.getItem('username') || '';
        let leaderboardData = JSON.parse(localStorage.getItem('leaderboard')) || [];
        let lastComboTime = Date.now();

        // ===== –≠–õ–ï–ú–ï–ù–¢–´ =====
        const clickerBtn = document.getElementById('clickerBtn');
        const scoreValue = document.getElementById('scoreValue');
        const comboValue = document.getElementById('comboValue');
        const comboText = document.getElementById('comboText');
        const rewardBox = document.getElementById('rewardBox');
        const promoCode = document.getElementById('promoCode');
        const resetBtn = document.getElementById('resetBtn');
        const shareBtn = document.getElementById('shareBtn');
        const submitBtn = document.getElementById('submitBtn');
        const usernameInput = document.getElementById('usernameInput');
        const leaderboardList = document.getElementById('leaderboardList');

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        usernameInput.value = username;
        updateLeaderboard();

        // ===== –°–û–ë–´–¢–ò–Ø =====
        clickerBtn.addEventListener('click', handleClick);
        resetBtn.addEventListener('click', resetGame);
        shareBtn.addEventListener('click', shareScore);
        submitBtn.addEventListener('click', submitScore);
        usernameInput.addEventListener('change', saveUsername);

        // ===== –§–£–ù–ö–¶–ò–ò =====
        function handleClick() {
            score += combo;
            updateUI();

            // –ö–æ–º–±–æ —Å–∏—Å—Ç–µ–º–∞ (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2 —Å–µ–∫ –±–µ–∑ –∫–ª–∏–∫–æ–≤)
            lastComboTime = Date.now();
            setTimeout(() => {
                if (Date.now() - lastComboTime > 2000) {
                    combo = 1;
                    updateUI();
                }
            }, 2000);

            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–º–±–æ –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –∫–ª–∏–∫–∞—Ö
            combo += 0.1;
            combo = Math.floor(combo * 10) / 10;

            // –ê–Ω–∏–º–∞—Ü–∏—è —á–∏—Å–ª–∞
            showScorePopup();

            // 10% —à–∞–Ω—Å –Ω–∞ –ø—Ä–∏–∑
            if (Math.random() < 0.1) {
                winPrize();
            }
        }

        function updateUI() {
            scoreValue.textContent = score;
            comboValue.textContent = combo.toFixed(1) + 'x';
            
            if (combo > 1) {
                comboText.textContent = `üî• –ö–û–ú–ë–û ${combo.toFixed(1)}x üî•`;
            } else {
                comboText.textContent = '';
            }
        }

        function showScorePopup() {
            const popup = document.createElement('div');
            popup.className = 'score-popup';
            popup.textContent = `+${combo.toFixed(0)}`;
            popup.style.left = '50%';
            popup.style.top = '50%';
            popup.style.color = combo > 2 ? '#FFD700' : '#FFFFFF';
            clickerBtn.parentElement.appendChild(popup);

            setTimeout(() => popup.remove(), 1000);
        }

        function winPrize() {
            const randomPromo = promoCodes[Math.floor(Math.random() * promoCodes.length)];
            promoCode.innerHTML = `<strong>${randomPromo.code}</strong><br>‚ú® ${randomPromo.discount}`;
            rewardBox.classList.add('show');

            setTimeout(() => {
                rewardBox.classList.remove('show');
            }, 4000);
        }

        function resetGame() {
            if (confirm('–¢—ã —É–≤–µ—Ä–µ–Ω? –í—Å–µ –æ—á–∫–∏ –æ–±–Ω—É–ª—è—Ç—Å—è!')) {
                score = 0;
                combo = 1;
                rewardBox.classList.remove('show');
                updateUI();
            }
        }

        function saveUsername() {
            username = usernameInput.value.trim() || '–ê–Ω–æ–Ω–∏–º';
            localStorage.setItem('username', username);
        }

        function submitScore() {
            if (!username) {
                saveUsername();
            }

            if (score === 0) {
                alert('–ù–∞–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã 1 –æ—á–∫–æ! üòÖ');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É
            const existingIndex = leaderboardData.findIndex(item => item.username === username);
            const newEntry = { username, score, date: new Date().toISOString() };

            if (existingIndex !== -1) {
                if (newEntry.score > leaderboardData[existingIndex].score) {
                    leaderboardData[existingIndex] = newEntry;
                }
            } else {
                leaderboardData.push(newEntry);
            }

            leaderboardData.sort((a, b) => b.score - a.score);
            leaderboardData = leaderboardData.slice(0, 10); // –¢–æ–ø 10

            localStorage.setItem('leaderboard', JSON.stringify(leaderboardData));
            updateLeaderboard();

            alert('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∫–æ—Ä–¥–æ–≤!\n\n–ê–¥–º–∏–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏ –≤—ã—à–ª–µ—Ç –ø—Ä–∏–∑ –≤ –∫–æ–Ω—Ü–µ –Ω–µ–¥–µ–ª–∏ üéÅ');
            resetGame();
        }

        function updateLeaderboard() {
            const medals = ['ü•á', 'ü•à', 'ü•â'];
            
            if (leaderboardData.length === 0) {
                leaderboardList.innerHTML = '<p style="color: #999; padding: 20px;">–¢–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞. –ë—É–¥—å –ø–µ—Ä–≤—ã–º! üöÄ</p>';
                return;
            }

            leaderboardList.innerHTML = leaderboardData
                .slice(0, 10)
                .map((item, idx) => `
                    <div class="leaderboard-item">
                        <span>
                            <span class="medal">${medals[idx] || '‚≠ê'}</span>
                            ${item.username}
                        </span>
                        <strong>${item.score}</strong>
                    </div>
                `)
                .join('');
        }

        function shareScore() {
            if (score === 0) {
                alert('–ù–∞–±–µ—Ä–∏ –æ—á–∫–∏ –ø–µ—Ä–µ–¥ —à—ç–∞—Ä–∏–Ω–≥–æ–º! üí™');
                return;
            }

            const text = `üéÆ –Ø –Ω–∞–±—Ä–∞–ª ${score} –æ—á–∫–æ–≤ –≤ VR CITY GAME –¢–∞–ø–∞–ª–∫–µ! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∏ –ø–æ–ø–∞–¥–∏ –≤ —Ç–æ–ø! üèÜ`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'VR CITY GAME',
                    text: text
                });
            } else {
                alert(text + '\n\n(–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å –¥—Ä—É–∑—å—è–º!)');
            }
        }

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        window.addEventListener('beforeunload', () => {
            localStorage.setItem('lastScore', score);
            localStorage.setItem('lastCombo', combo);
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        if (localStorage.getItem('lastScore')) {
            score = parseInt(localStorage.getItem('lastScore'));
            combo = parseFloat(localStorage.getItem('lastCombo'));
            updateUI();
        }
    </script>
</body>
</html>
